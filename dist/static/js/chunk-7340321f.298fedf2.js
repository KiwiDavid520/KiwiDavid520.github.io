(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7340321f"],{"0feb":function(e,t,r){"use strict";r.d(t,"d",(function(){return n})),r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"e",(function(){return c})),r.d(t,"b",(function(){return o}));var s=r("b775");function n(){return Object(s["a"])({url:"/sys/permission",method:"get"})}function i(e){return Object(s["a"])({url:"/sys/permission",method:"post",data:e})}function a(e){return Object(s["a"])({url:"/sys/permission/".concat(e),method:"get"})}function c(e){return Object(s["a"])({url:"/sys/permission/".concat(e.id),method:"put",data:e})}function o(e){return Object(s["a"])({url:"/sys/permission/".concat(e),method:"delete"})}},c23a:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-card",{staticStyle:{"margin-bottom":"5px"}},[r("el-row",{attrs:{type:"flex",align:"middle",justify:"end"}},[r("el-col",{attrs:{span:4}},[r("el-button",{staticStyle:{width:"100%","font-size":"20px"},attrs:{type:"primary"},on:{click:e.addPermissionWithNoPid}},[e._v("添加权限")])],1)],1)],1),r("el-card",[r("el-table",{staticStyle:{cursor:"pointer"},attrs:{data:e.permissionList,"row-key":"id",border:"","tree-props":{children:"children"},height:"500px","highlight-current-row":!0}},[r("el-table-column",{attrs:{label:"权限名称",prop:"name",align:"center"}}),r("el-table-column",{attrs:{label:"权限标记",prop:"code",align:"center"}}),r("el-table-column",{attrs:{label:"权限描述",prop:"description",align:"center"}}),r("el-table-column",{attrs:{label:"权限操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.type?r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.addPermission(t.row.id)}}},[e._v("添加权限")]):e._e(),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.updatePermission(t.row.id)}}},[e._v("编辑权限")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.deletePermission(t.row.id)}}},[e._v("删除权限")])]}}])})],1)],1),r("el-dialog",{attrs:{title:(e.permissionType,"添加权限"),visible:e.isShow},on:{close:e.cancelBtn},scopedSlots:e._u([{key:"footer",fn:function(){return[r("el-row",{attrs:{type:"flex",justify:"center"}},[r("el-button",{on:{click:e.cancelBtn}},[e._v(e._s(e.$t("message.取消")))]),r("el-button",{attrs:{type:"primary"},on:{click:e.sureBtn}},[e._v(e._s(e.$t("message.确定")))])],1)]},proxy:!0}])},[r("el-form",{ref:"ruleForm",attrs:{model:e.formData,"label-width":"100px",rules:e.rules}},[r("el-form-item",{attrs:{label:"权限名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"请输入权限名称"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1),r("el-form-item",{attrs:{label:"权限描述",prop:"description"}},[r("el-input",{attrs:{placeholder:"请输入权限描述"},model:{value:e.formData.description,callback:function(t){e.$set(e.formData,"description",t)},expression:"formData.description"}})],1),r("el-form-item",{attrs:{label:"权限标识",prop:"code"}},[r("el-input",{attrs:{placeholder:"请输入权限标识"},model:{value:e.formData.code,callback:function(t){e.$set(e.formData,"code",t)},expression:"formData.code"}})],1),r("el-form-item",{attrs:{label:"权限激活状态"}},[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"1","inactive-value":"0"},model:{value:e.formData.enVisible,callback:function(t){e.$set(e.formData,"enVisible",t)},expression:"formData.enVisible"}})],1)],1)],1)],1)},n=[],i=r("5530"),a=r("c7eb"),c=r("1da1"),o=(r("d3b7"),r("159b"),r("0feb")),l={data:function(){return{formData:{enVisible:"",name:"",code:"",description:"",type:"",pid:""},permissionList:[],isShow:!1,permissionType:"0",id:"",rules:{name:[{required:!0,message:"请输入权限名称",trigger:"blur"}],description:[{required:!0,message:"请输入权限描述",trigger:"blur"}],code:[{required:!0,message:"请输入权限标识",trigger:"blur"}]}}},created:function(){this.getPermissionList()},methods:{getPermissionList:function(){var e=this;return Object(c["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["d"])();case 2:e.permissionList=t.sent,e.permissionList=e.listToTree(e.permissionList,"0"),console.log(e.permissionList);case 5:case"end":return t.stop()}}),t)})))()},listToTree:function(e,t){var r=this,s=[];return e.forEach((function(n){n.pid===t&&(n.children=r.listToTree(e,n.id),s.push(n))})),s},addPermission:function(e){var t=this;return Object(c["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.permissionType="0",t.id=e,t.isShow=!t.isShow;case 3:case"end":return r.stop()}}),r)})))()},cancelBtn:function(){this.isShow=!1,this.formData={enVisible:"",name:"",code:"",description:"",type:"",pid:""},this.resetForm()},sureBtn:function(){var e=this;return Object(c["a"])(Object(a["a"])().mark((function t(){return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("2"!==e.permissionType){t.next=18;break}return t.next=3,e.$refs.ruleForm.validate();case 3:return t.prev=3,t.next=6,Object(o["e"])(e.formData);case 6:e.$message.success("更新成功"),e.cancelBtn(),e.getPermissionList(),e.resetForm(),t.next=16;break;case 12:t.prev=12,t.t0=t["catch"](3),e.$message.success(t.t0),e.cancelBtn();case 16:t.next=52;break;case 18:if("0"!==e.permissionType){t.next=37;break}return t.prev=19,t.next=22,e.$refs.ruleForm.validate();case 22:return t.next=24,Object(o["a"])(Object(i["a"])(Object(i["a"])({},e.formData),{},{pid:e.id,type:2}));case 24:e.id="0",e.$message.success("添加权限点成功"),e.cancelBtn(),e.getPermissionList(),e.resetForm(),t.next=35;break;case 31:t.prev=31,t.t1=t["catch"](19),e.$message.success(t.t1),e.cancelBtn();case 35:t.next=52;break;case 37:return t.prev=37,t.next=40,e.$refs.ruleForm.validate();case 40:return t.next=42,Object(o["a"])(Object(i["a"])(Object(i["a"])({},e.formData),{},{pid:"0",type:1}));case 42:e.$message.success("添加权限点成功"),e.cancelBtn(),e.getPermissionList(),e.resetForm(),t.next=52;break;case 48:t.prev=48,t.t2=t["catch"](37),console.log(t.t2),e.$message.error("添加权限点失败");case 52:case"end":return t.stop()}}),t,null,[[3,12],[19,31],[37,48]])})))()},updatePermission:function(e){var t=this;return Object(c["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.permissionType="2",r.next=3,Object(o["c"])(e);case 3:t.formData=r.sent,t.isShow=!0;case 5:case"end":return r.stop()}}),r)})))()},addPermissionWithNoPid:function(){this.permissionType="1",this.isShow=!0},deletePermission:function(e){var t=this;return Object(c["a"])(Object(a["a"])().mark((function r(){return Object(a["a"])().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.$confirm("确定要删除吗？该操作不可逆！");case 2:return r.next=4,Object(o["b"])(e);case 4:t.getPermissionList();case 5:case"end":return r.stop()}}),r)})))()},resetForm:function(){this.$refs.ruleForm.resetFields()}}},u=l,m=r("2877"),p=Object(m["a"])(u,s,n,!1,null,"d7decc68",null);t["default"]=p.exports}}]);